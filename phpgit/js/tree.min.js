function expanderLink(c,d){var b=jQuery(document.createElement("a"));b.attr("href",c);b.text(d);b.addClass("jsTree");b.addClass("expander");return b}function initTree(){var c=window.location.href.match(/^([^\?]+\/)/);if(!c){return}c=c[1];var d="[+]";var b="[â€“]";var a="â€”";$("a.treeLink").each(function(){$(this).parent().parent().find("td.expander").append(expanderLink($(this).attr("href"),d))});$("a.jsTree").live("click",function(){var j=$(this).attr("href").match(/h=([0-9a-fA-F]{40}|HEAD)/);if(!j){return}j=j[1];var e=$(this).parent();var i=e.parent();var g=$("."+j);if(g&&g.size()>0){if(g.is(":visible")){g.hide();g.each(function(){if($(this).data("parent")==j){$(this).data("expanded",false)}});i.find("a.expander").text(d)}else{g.each(function(){if(($(this).data("parent")==j)||($(this).data("expanded")==true)){$(this).show();$(this).data("expanded",true)}});i.find("a.expander").text(b)}}else{var h=i.data("depth");if(h==null){h=0}h++;var f=jQuery(document.createElement("img"));f.attr("src",c+"images/tree-loader.gif");f.attr("alt",GITPHP_RES_LOADING);f.addClass("treeSpinner");i.find("a.treeLink").after(f);$.get($(this).attr("href"),{o:"js"},function(l){var k=jQuery(l);k.addClass(j);var m=i.attr("class").split(/\s+/);$.each(m,function(n,o){if(o.match(/[0-9a-fA-F]{40}/)){k.addClass(o)}});k.each(function(){$(this).data("parent",j);$(this).data("expanded",true);$(this).data("depth",h);var p=$(this).find("td.fileName");var o=$(this).find("a.treeLink");if(o&&(o.size()>0)){p.prepend(expanderLink(o.attr("href"),d))}else{p.prepend(a)}for(var n=1;n<h;n++){p.prepend(a)}});i.after(k);i.find("a.expander").text(b);i.find("img.treeSpinner").remove()})}return false})}$(document).ready(function(){initTree()});